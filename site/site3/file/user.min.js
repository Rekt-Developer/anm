function bin2hex(e){var o,t=e.length,n=[];for(o=0;o<t;o++)n[o]=e.charCodeAt(o).toString(16);return n.join("")}var $menuSwitcher;Core=function(c){"use strict";return{search:function(){var e,o=c("#query").val(),t=c("#route").val(),n=c("#ishash").val(),a=c("#isfullhash").val(),i=c("#spaceReplace").val(),r=c("#orderBy").val(),s=c("#duration").val();o&&(0==i.length&&(i=" "),o=o.toLowerCase().replace(/ +/g,i).replace(/[^a-z0-9-_%+ ]/g,"").trim(),e=t.match("^(/).*(/|.html)?$"),t=t.replace(e[1],"").replace(e[2],""),a?t=bin2hex(t=t.replace(/{query}/,o)):(n&&(o=bin2hex(o)),t=t.replace(/{query}/,o)),t=e[1]+t,void 0!==e[2]&&(t+=e[2]),void 0!==r&&0<r.length&&(t+="?orderBy="+encodeURIComponent(r)),void 0!==s&&0<s.length&&(0<r.length?t+="&duration="+encodeURIComponent(s):t+="?duration="+encodeURIComponent(s)),window.location=t)},videoLike:function(t,e){c.post(e,{},function(e){if("ok"==e.status){var o=c(t).text();o++,c(t).contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o,c.notify("Vote counted",{position:"right bottom",className:"success"})}else c.notify("You already voted",{position:"right bottom",className:"error"})},"json")},videoDislike:function(t,e){c.post(e,{},function(e){if("ok"==e.status){var o=c(t).text();o++,c(t).contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o,c.notify("Vote counted",{position:"right bottom",className:"success"})}else c.notify("You already voted",{position:"right bottom",className:"error"})},"json")},videoUpdateFavorite:function(e){c.post(e,{},function(e){if("ok"==e.status){var o=c("#addtofav"),t=c("#favorites-count"),n=t.html();0<o.length?(c("#fav_block_success").show(),c("#fav_block_success").html("The video has been added to your favourites."),c(".fav_link").attr("id","delfromfav"),c(".fav_link").html('<span id="ics-fav"></span>Favorited'),t.html(parseInt(n)+1)):(c("#fav_block_success").show(),c("#fav_block_success").html("The video has been removed from your favourites."),c(".fav_link").attr("id","addtofav"),c(".fav_link").html('<span id="ics-fav"></span>Favorite'),t.html(parseInt(n)-1))}},"json")}}}(jQuery),$(document).ready(function(){($menuSwitcher=$("#menu_switcher")).on("click",function(){$("body").toggleClass("menu-opened")}),$("#query").keyup(function(e){13===e.keyCode&&$("#query").parent().find("button").click()})});